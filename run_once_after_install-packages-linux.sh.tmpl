{{- if (eq .chezmoi.os "linux") -}}
#!/usr/bin/env bash

set -eufo pipefail

## cross-distro packages
# Starship
curl -fsSL "https://starship.rs/install.sh" | sh
# Deno
curl -fsSL "https://deno.land/x/install/install.sh" | sh

{{ if (eq .chezmoi.osRelease.id "debian" "ubuntu") -}}
packages=(
	curl
    jq
	vim
    tmux
    htop
    git
    neofetch
    gpg
    gpg-agent
    shellcheck
    ripgrep
    # Required for building Rust toolchain
    libpq-dev
    libssl-dev
    pkg-config
)

{{ if (eq .chezmoi.hostname "idris") -}}
packages+=(
    borgmatic
)
{{- end }}

sudo apt update

sudo apt install -y ${packages[@]}

sudo apt upgrade -y
{{- end -}}

{{- end -}}
{{/* vim: set filetype=bash: */}}
