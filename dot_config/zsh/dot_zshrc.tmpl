# Profiling flag
if [[ "$ZPROF" = true ]]; then
  zmodload zsh/zprof
fi

# Load zinit
source "${ZINIT_HOME}/zinit.zsh"

# Turbo start shell
zinit ice wait'!' lucid nocd \
    atload'!prompt_starship_precmd'

# Plugin config
export NVM_LAZY_LOAD=${NVM_LAZY_LOAD-true}
export NVM_AUTO_USE=${NVM_AUTO_USE-true}

zinit snippet OMZ::lib/git.zsh
zinit snippet OMZ::lib/completion.zsh

zinit snippet OMZ::plugins/git/git.plugin.zsh
zinit snippet OMZ::plugins/gpg-agent/gpg-agent.plugin.zsh
zinit load zsh-users/zsh-syntax-highlighting
{{- if eq .toolchains.node true }}
zinit load lukechilds/zsh-nvm
{{- end }}

# Other shell config
{{- include "inc/opts.zsh" }}

# Command aliases, some are overwritten by oh-my-zsh
{{- include "inc/aliases.zsh" }}

# Start starship
eval "$(starship init zsh)"

# Profiling end flag
if [[ "$ZPROF" = true ]]; then
  zprof
fi

{{/* vim: set filetype=zsh: */}}
